# 부동산 STO (기업협약 프로젝트)

- figma : https://www.figma.com/file/aBMZ7hFxCcddiVapcRQxbY/bounceCode_STO%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8?type=design&node-id=1%3A2&mode=design&t=zW7U2zUvKLzE1cEA-1
- ERD : https://dbdiagram.io/d/6541ab467d8bbd64653cf50b

### 2023/11/06

- 바운스코드 로그인 api 테스트 하는 중 (실패) : 기업에서 제공해준 가이드를 따라했고 요청이 정상적으로 처리 됬다고 나왔지만 data가 null이 넘어 오는 상태여서 업체에 문의 하였고 확인 후 연락 준다고 통보받음
- 인증 관련 설정 테스트를 위해 https 서버 배포

### 2023/11/07

- 데이터베이스 users 테이블 blacklist 컬럼추가, vote 테이블 매물 이름, 발행 총량 컬럼 추가
- 테이블 컬럼명 수정 real_states_id -> real_state_id
- 어드민 메인, 등록 페이지 관련 api 명세서 작업 진행
- 어드민 메인 페이지 백엔드 작업(controller) 후 더미데이터 작성 중 메인페이지 재설계 요청하여 중단

### 2023/11/08

- 어드민 메인 페이지 레이아웃 변경 작업으로 인한 api 명세서 재작업 및 백엔드 작업 진행 중
- 업체 컨펌 후 작업 순위 변경에 따른 회의 진행 하였고 우선 순위가 토큰 발행 및 유통에 포커스가 맞춰짐
- 어드민 메인페이지 백엔드 작업 완료 후 청약 페이지 바로 시작할 예정
- 새로운 didtoken 발급 가이드를 받았지만 또 안됨

### 2023/11/09

- 어드민 메인 페이지 전체 매물 및 거래량 가져오는 백엔드 작업 중 (타입때매 다터지는 중)
- 업체 측에서 알려준 방법으로 사용자 wallet 주소 가져오기 완료 react 18, web3 4.2.2 동작 확인
- 데이터베이스 Trades, Orders 테이블 조인 해제 및 테스트용 더미 데이터 작업 진행

### 2023/11/10

- 어드민 메인 페이지 매물정보, 공모현황, 이용자 수, 블랙리스트, 최근 거래내역, 매물별 거래량 차트 (일별, 주간별, 월별) 백엔드 작업완료
- 매물별 거래량 (주간, 월간) 데이터는 가공 중

### 2023/11/11

- 어드민 메인 페이지 매물별 거래량 (주간, 월간) 데이터 가공 완료
- 청약 메인 페이지 청약 목록 가져오는 백엔드 기능 구현 완료
- 청약 상세 페이지 및 청약 버튼 백엔드 기능 구현 완료

### 2023/11/12

- 마이페이지 백엔드 작업관련 api 명세서 정리
- 토큰 내/외부 전송 관련 컨트랙트 작성 공부 및 정리

### 2023/11/13

- 마이페이지 내 정보 불러오기, 입금 기능, 출금 기능, 구현 완료
- 배당금 지금 관련 테이블 추가(지급일 기준 토큰을 보유하고 있는 사람에게 배당금을 지급해야하기 때문에 이력이 남아야함)
- 마이페이지 입출금 거래 내역에 애매한 부분이 있어 현재 보류로 두고 총 자산 부분 작업 진행 중

### 2023/11/14

- 마이페이지 총 자산 보기, 매물별 자산 정보 보여주는 기능 구현완료
- 마이페이지 작업중 배당금 부분관련하여 애매한 부분 발생하여 협의하였고 dividends 테이블에 status 컬럼을 추가하여 배당금 지급 전 후를 표시하는 방법을 선택하였고 표출되는 데이터가 달라져서 api 명세서 작업 진행

### 2023/11/15

- 마이페이지 투표 관련 백엔드 작업 중 블록체인으로 하기로 하여 투표 관련 부분 보류
- 마이페이지 내 청약 목록 보여주는 기능 완료하여 마이페이지 백엔드 기능 구현완료

### 2023/11/16

- 마이페이지 총 자산 및 종목별 자산 내역 관련 계산 방식 변경으로 인한 재작업 진행 및 완료
- 청약 보여주는 페이지에 표출되는 데이터 추가(청약에 성공한 매물에 대한 현재가격 출력 및 짧은 설명 추가)
- 토큰 내/외부 전송관련 작업해야할 내용 정리 및 학습 (내부 지갑에서 외부 지갑으로 토큰을 전송하는건 감지하기 쉬운데 외부에서 내부로 들어올때 복잡한듯)

### 2023//11/17

- 토큰 내/외부 전송관련 web3.js를 통해 transaction 감지되는거 확인완료 이력을 남기는 방법은 계속 구상중
- 어드민 매물 관리 페이지에 받는 데이터가 달라져서 추가 작업 진행 (매물 관리 전체 리스트 보여주는 기능과 등록된 매물의 상세 정보를 볼 수 있는 기능 구현해달라해서 넘겨주는 데이터 가공 작업 진행)

### 2023/11/18

- 토큰 내/외부 전송관련 transactions를 감시하여 from, to, value를 추적하는건 성공했지만 어떤 토큰인지(symbol) 알지 못하는 상황 발생
- erc20 토큰에 transfer 부분에 이벤트를 추가하여 from, to, value, symbol을 띄우게 하여 transaction의 hash를 가져와 receipt 안에 logs를 확인 하는 식으로 구현
- ganache 환경으로 테스트 진행 중

### 2023/11/19

- 로그인 방법 구상 및 브런치 merge 작업 진행
- 현재 각각 브런치에 있는 자료가 너무 많이 바뀐 상태라 모여서 merge하는 작업이 필요할듯 보임

### 2023/11/20

- 로그인 관련하여 로그인 성공하면 access_token과 refresh_token이 쿠키로 올라가고 백엔드에 로그인이 필요한 요청이 발생하면 브라우저에 있는 access_token을 백엔드로 보냄
- 백엔드에서 access_token을 검사하고 유효하다면 작업을 처리하는 식의 로그인 기능 구현
- 최초로 로그인 했을때는 관련 정보를 데이터베이스에 저장하는 로직 구현 중

### 2023/11/21

- 로그인 관련 검증 방식 변경 및 마이페이지, 청약 하기 버튼, 매물 거래 관련 로그인 인증 방식 변경으로 인한 작업 진행
- 블록체인 관련 배포 작업 진행 예정이 였으나 컨트랙트가 배포되지 않아 테스트는 하지 못함

### 2023/11/22

- 컨트랙트 배포 관련 업체 측 네트워크에 배포가 되지 않는 현상 발생하여 업체에 문의하였고 업체에서 컨트랙트 직접 배포해보겟다는건지 코드 받아감
- sepolia나 ganache 등 테스트넷에서는 정상 배포 확인

### 2023/11/23

- BNC 네트워크 컨트랙트 배포 관련 업체 문의 결과 업체에선 잘된다고 하는데 우리쪽에선 배포가 되지 않음 계속 문의 해봤자 그쪽에선 된다하니 뭘 확인해달라고 하지 못하겟음
- 토큰 내/외부 전송 관련 로그 찍히는거까지 확인 찍힌 로그를 기반으로 데이터베이스에 저장하려고 하려던 찰나 누락되는 트랜잭션이 있다는걸 확인 동인한 블록에 트랜잭션이 발생하면 하나만 나오거나 아예 누락되는거 같아 수정중
